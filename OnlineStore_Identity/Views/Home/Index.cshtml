@model IEnumerable<OnlineStore_Identity.Models.Product>
@using OnlineStore_Identity.Components;

@{
    ViewData["Title"] = "Home Page";
}

@section HomeNavBar{

    <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-left ms-3" id="sidenav-main">
        <div class="sidenav-header">
            <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute right-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
            <a class="navbar-brand m-0" href="../pages/dashboard.html">
                <img src="~/css/assets/img/logo-ct.png" class="navbar-brand-img h-100 w-15" alt="...">
                <span class="ms-1 font-weight-bold">Online Store</span>
            </a>
        </div>
        <hr class="horizontal dark mt-0">
        <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
            <h4 style="color:darkmagenta">Filter By:</h4>
            <ul class="navbar-nav">
                <li class="nav-item mt-3">
                    <h6 style="color:black" class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Color</h6>
                    <ul style="list-style-type:none">

                        @foreach (var item in ViewBag.colors)
                        {
                            <li><input type="checkbox" name="colorFilter" id="@item" /> @item</li>
                        }
                        <!--<li><input type="checkbox" name="colorFilter" id="black" /> Black</li>
                        <li><input type="checkbox" name="colorFilter" id="red" /> Red</li>-->
                        @*<li>@Html.CheckBox("white",false,new { onchange="colorFilter(event)"}) White</li>*@
                        <!--<li><input type="checkbox" name="colorFilter" id="white" /> White</li>
                        <li><input type="checkbox" name="colorFilter" id="yellow" /> Yellow</li>
                        <li><input type="checkbox" name="colorFilter" id="blue" /> Blue</li>
                        <li><input type="checkbox" name="colorFilter" id="green" /> Green</li>
                        <li><input type="checkbox" name="colorFilter" id="orange" /> Orange</li>
                        <li><input type="checkbox" name="colorFilter" id="pink" /> Pink</li>
                        <li><input type="checkbox" name="colorFilter" id="purple" /> Purple</li>-->
                    </ul>
                </li>
                <li class="nav-item mt-3">
                    <h6 style="color:black" class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Size</h6>
                    <ul style="list-style-type:none">
                        @foreach (var item in ViewBag.sizes)
                        {
                            <li><input type="checkbox" name="sizeFilter" id="@item" /> @item</li>
                        }
                        @*<li><input type="checkbox" name="sizeFilter" id="xsmall" /> XSmall</li>
                        <li><input type="checkbox" name="sizeFilter" id="small" /> Small</li>
                        <li><input type="checkbox" name="sizeFilter" id="medium" /> Medium</li>
                        <li><input type="checkbox" name="sizeFilter" id="large" /> Large</li>
                        <li><input type="checkbox" name="sizeFilter" id="xlarge" /> XLarge</li>*@
                    </ul>
                </li>
                <li class="nav-item mt-3">
                    <h6 style="color:black" class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Class</h6>
                    <ul style="list-style-type:none">
                        @{var i = 1; }
                        @foreach (var item in ViewBag.classes)
                        {
                            <li><input type="checkbox" name="classFilter" id="@("class" + i)" /> @item.className</li>
                            i++;
                        }
                    </ul>
                </li>
            </ul>
        </div>
    </aside>
}

<style>

    .smallData {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
</style>

<h1 class="text-center">Products</h1>
<br>
<br>

<div class="container text-center rounded border border-dark">
    <h4 style="color:darkmagenta">Categories</h4>
    <div class="container py-4">
        <div class="row">
            <div class="col-lg-12 text-center">
                @{ var ii = 1;}
                @foreach (var item in ViewBag.categories)
                {
                    <button style="display:inline-block; vertical-align:top;" type="button" id="@ii" class="btn btn-outline-primary btn-sm mb-0">@item.categoryName</button>
                    ii++;
                }
                
            </div>
        </div>
    </div>
</div>

<br />

<div class="container">
    <div class="row" id="productBody">
        <partial name="CategoryFilter" model="Model">
    </div>

    @*<div class="modal" tabindex="-1" role="dialog" id="details-modal">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="CloseModel()">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">

                </div>
            </div>
        </div>
    </div>*@
</div>
<script>
    var id;
    for (var i = 0; i < 10; i++) {
        $("#" + i).click(function (e) {
            //console.log(e.target.id);
            id = e.target.id;
            Soso();
            //$.ajax({
            //    method: "GET",
            //    url: "/Home/CategoryFilter/" + id,
            //    contentType: 'application/json; charset=utf-8',
            //    success: function (res) {
            //        $("#productBody").html(res);
            //        console.log(res);
            //    },
            //    error: function (e) {
            //        console.log(e);
            //    }
            //})
        })
    }

    //$('input[name="colorFilter"]').bind('change', function () {
    //    var flag = false;
    //    var secondFlag = false;
    //    var color;
    //    if (this.checked) {
    //        flag = true;
    //    }
        
    //    color = this.id;
    //    console.log(color);
    //    $.ajax({
    //        url: "/Home/ColorFilter",
    //        type: "get",
    //        traditional: true,
    //        data: { "color": color, "flag": flag, "secondFlag": secondFlag },
    //        success: function (res) {
    //            $("#productBody").html(res);
    //            console.log(res);
    //        },
    //        error: function (e) {
    //            console.log(e);
    //        }
    //    });
    //});

    //$('input[name="classFilter"]').bind('change', function () {
    //    var flag = false;
    //    var secondFlag = false;
    //    var myClass;
    //    if (this.checked) {
    //        flag = true;
    //    }

    //    myClass = this.id.charAt(5);
    //    console.log(myClass);

    //    $('input[name="colorFilter"]').each(function () {
    //        //console.log(this.id);
    //        if (this.checked && this.id != myClass) {
    //            ////if (this.id == color) {
    //            ////    break;
    //            ////}
    //            secondFlag = true;
    //        }
    //    });
    //    //console.log(secondFlag);

    //    $.ajax({
    //        url: "/Home/ClassFilter",
    //        type: "get",
    //        traditional: true,
    //        data: { "myClass": myClass, "flag": flag, "secondFlag": secondFlag },
    //        success: function (res) {
    //            $("#productBody").html(res);
    //            console.log(res);
    //        },
    //        error: function (e) {
    //            console.log(e);
    //        }
    //    });
    //});





    //$("#Apply").click(function () {
    //    var colors = [];
    //    $('input[name="colorFilter"]').each(function () {
    //        var $this = $(this);
    //        if ($this.is(":checked")) {
    //            colors.push($this.attr("id"));
    //        }
    //    });
    //    //console.log(colors);
    //    $.ajax({
    //        //method: "GET",
    //        //url: "/Home/ColorFilter/" + colors,
    //        url: "/Home/ColorFilter",
    //        type: "get",
    //        traditional: true,
    //        data: { "colors": colors},
    //        //contentType: 'application/json; charset=utf-8',
    //        success: function (res) {
    //            $("#productBody").html(res);
    //            console.log(res);
    //        },
    //        error: function (e) {
    //            console.log(e);
    //        }
    //    });
    //});



    //$("#Apply").click(function () {
    //    if ($('input[name="colorFilter"]:checked')) {
    //        console.log()
    //    }
    //})

    //for (var i = 0; i < 9; i++) {
    //    $("#C" + i).change(function (e) {
    //        if (("#C"+i)) {
    //            console.log(e.target.id);
    //        }

    //        var id = e.target.id;
    //        $.ajax({
    //            method: "GET",
    //            url: "/Home/ColorFilter/" + id,
    //            contentType: 'application/json; charset=utf-8',
    //            success: function (res) {
    //                $("#productBody").html(res);
    //                console.log(res);
    //            },
    //            error: function (e) {
    //                console.log(e);
    //            }
    //        })
    //    })
    //}

    function Soso() {

        var colors = [];
        var sizes = [];
        var classes = [];

        $('input[name="colorFilter"]').each(function () {
            var $this = $(this);
            if ($this.is(":checked")) {
                colors.push($this.attr("id"));
            }
        });

        $('input[name="sizeFilter"]').each(function () {
            var $this = $(this);
            if ($this.is(":checked")) {
                sizes.push($this.attr("id"));
            }
        });

        $('input[name="classFilter"]').each(function () {
            var $this = $(this);
            if ($this.is(":checked")) {
                classes.push($this.attr("id").charAt(5));
            }
        });

        //console.log(colors);
        $.ajax({
            url: "/Home/Filter",
            type: "get",
            traditional: true,
            data: { "colors": colors, "sizes": sizes, "classes": classes, "id": id },
            success: function (res) {
                $("#productBody").html(res);
                console.log(res);
            },
            error: function (e) {
                console.log(e);
            }
        });
    }

    $('input[type="checkbox"]').bind("change",Soso)


</script>

@*<script>
    showDetails = (url) => {
        console.log("hi");
        $.ajax({
            type: "GET",
            url: url,
            success: function (res) {
                $('#details-modal .modal-body').html(res);
                $('#details-modal').modal('show');
            }
        })
    }

    CloseModel = () => {
        $('#details-modal').modal('hide');
    }

</script>*@

























































@*<div class="card-body px-0 pt-0 pb-2">
        <div class="table-responsive p-0">
            <table class="table align-items-center mb-0">
                <thead>
                    <tr>
                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Author</th>
                        <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Function</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status</th>
                        <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Employed</th>
                        <th class="text-secondary opacity-7"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="d-flex px-2 py-1">
                                <div>
                                    <img src="../assets/img/team-2.jpg" class="avatar avatar-sm me-3">
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                    <h6 class="mb-0 text-sm">John Michael</h6>
                                    <p class="text-xs text-secondary mb-0">john@creative-tim.com</p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <p class="text-xs font-weight-bold mb-0">Manager</p>
                            <p class="text-xs text-secondary mb-0">Organization</p>
                        </td>
                        <td class="align-middle text-center text-sm">
                            <span class="badge badge-sm bg-gradient-success">Online</span>
                        </td>
                        <td class="align-middle text-center">
                            <span class="text-secondary text-xs font-weight-bold">23/04/18</span>
                        </td>
                        <td class="align-middle">
                            <a href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                Edit
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="d-flex px-2 py-1">
                                <div>
                                    <img src="../assets/img/team-3.jpg" class="avatar avatar-sm me-3">
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                    <h6 class="mb-0 text-sm">Alexa Liras</h6>
                                    <p class="text-xs text-secondary mb-0">alexa@creative-tim.com</p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <p class="text-xs font-weight-bold mb-0">Programator</p>
                            <p class="text-xs text-secondary mb-0">Developer</p>
                        </td>
                        <td class="align-middle text-center text-sm">
                            <span class="badge badge-sm bg-gradient-secondary">Offline</span>
                        </td>
                        <td class="align-middle text-center">
                            <span class="text-secondary text-xs font-weight-bold">11/01/19</span>
                        </td>
                        <td class="align-middle">
                            <a href="#!" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                Edit
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="d-flex px-2 py-1">
                                <div>
                                    <img src="../assets/img/team-4.jpg" class="avatar avatar-sm me-3">
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                    <h6 class="mb-0 text-sm">Laurent Perrier</h6>
                                    <p class="text-xs text-secondary mb-0">laurent@creative-tim.com</p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <p class="text-xs font-weight-bold mb-0">Executive</p>
                            <p class="text-xs text-secondary mb-0">Projects</p>
                        </td>
                        <td class="align-middle text-center text-sm">
                            <span class="badge badge-sm bg-gradient-success">Online</span>
                        </td>
                        <td class="align-middle text-center">
                            <span class="text-secondary text-xs font-weight-bold">19/09/17</span>
                        </td>
                        <td class="align-middle">
                            <a href="#!" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                Edit
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="d-flex px-2 py-1">
                                <div>
                                    <img src="../assets/img/team-3.jpg" class="avatar avatar-sm me-3">
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                    <h6 class="mb-0 text-sm">Michael Levi</h6>
                                    <p class="text-xs text-secondary mb-0">michael@creative-tim.com</p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <p class="text-xs font-weight-bold mb-0">Programator</p>
                            <p class="text-xs text-secondary mb-0">Developer</p>
                        </td>
                        <td class="align-middle text-center text-sm">
                            <span class="badge badge-sm bg-gradient-success">Online</span>
                        </td>
                        <td class="align-middle text-center">
                            <span class="text-secondary text-xs font-weight-bold">24/12/08</span>
                        </td>
                        <td class="align-middle">
                            <a href="#!" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                Edit
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="d-flex px-2 py-1">
                                <div>
                                    <img src="../assets/img/team-2.jpg" class="avatar avatar-sm me-3">
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                    <h6 class="mb-0 text-sm">Richard Gran</h6>
                                    <p class="text-xs text-secondary mb-0">richard@creative-tim.com</p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <p class="text-xs font-weight-bold mb-0">Manager</p>
                            <p class="text-xs text-secondary mb-0">Executive</p>
                        </td>
                        <td class="align-middle text-center text-sm">
                            <span class="badge badge-sm bg-gradient-secondary">Offline</span>
                        </td>
                        <td class="align-middle text-center">
                            <span class="text-secondary text-xs font-weight-bold">04/10/21</span>
                        </td>
                        <td class="align-middle">
                            <a href="#!" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                Edit
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="d-flex px-2 py-1">
                                <div>
                                    <img src="../assets/img/team-4.jpg" class="avatar avatar-sm me-3">
                                </div>
                                <div class="d-flex flex-column justify-content-center">
                                    <h6 class="mb-0 text-sm">Miriam Eric</h6>
                                    <p class="text-xs text-secondary mb-0">miriam@creative-tim.com</p>
                                </div>
                            </div>
                        </td>
                        <td>
                            <p class="text-xs font-weight-bold mb-0">Programtor</p>
                            <p class="text-xs text-secondary mb-0">Developer</p>
                        </td>
                        <td class="align-middle text-center text-sm">
                            <span class="badge badge-sm bg-gradient-secondary">Offline</span>
                        </td>
                        <td class="align-middle text-center">
                            <span class="text-secondary text-xs font-weight-bold">14/09/20</span>
                        </td>
                        <td class="align-middle">
                            <a href="#!" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                Edit
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>*@

